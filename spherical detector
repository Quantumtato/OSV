#include <Servo.h>

Servo servo1;
Servo servo2;
int maxval =400;
double candles[200][1];
int i =0;
int numcandles=0;

int theta = 0;    // variable to store the servo position
int phi = 0;
float deltaphi=15;
float deltatheta=90;
boolean sign = true;
#define input 4


void go() {
 for (theta = 0; theta <= 90; theta += 1) {
    // in steps of 1 degree
    servo1.write(theta);  
      if(sign){
        for(phi = 45; phi <= 135; phi += 1){
          servo2.write(phi);
          if(!digitalRead(input)){
            candles[i][0] = phi;
            candles[i][1]= theta;
            Serial.println("located");
            //add position data
            i++;
            }else{}
          delay(5);
          }}else{
            for(phi = 135; phi >= 45; phi -= 1){
           servo2.write(phi);
           ///start angle writing data
           if(!digitalRead(input)){
               candles[i][0] = phi;
              candles[i][1]= theta;
              Serial.println("located");
               //add position data
            i++;
            }else{}
          delay(5);
          }
            }
         sign =!sign;
    delay(5);                      // waits 15ms for the servo to reach the thetaition
  }
 /* for (theta = 90; theta >= 0; theta -= 1) { // goes from 180 degrees to 0 degrees
    servo1.write(theta);              // tell servo to go to thetaition in variable 'pos'
if(sign){
        for(phi = 45; phi <= 135; phi += 1){
          servo2.write(phi);
          delay(10);
          if(!digitalRead(input)){
            candles[i][0] = phi;
            candles[i][1]= theta;
            //add position data
            i++;
            }else{}
          }}else{
            for(phi = 135; phi >= 45; phi -= 1){
           servo2.write(phi);
          delay(10);
          if(!digitalRead(input)){
            candles[i][0] = phi;
            candles[i][1]= theta;
            //add position data
            i++;
            }else{}
          }
            }
    sign =!sign;
    delay(10);                       // waits 15ms for the servo to reach the position
  }*/
}
void detector(){
    for(int j=0;j <=maxval; j+= 1){
       for(int m=0;m <=maxval; m+= 1){
        if(abs(candles[j][0]-candles[m][0])>deltatheta || abs(candles[j][1]-candles[m][1])>deltaphi){
          candles[m][0] =NULL;
          candles[m][1] =NULL;
          }else{}
          
  }
      }
    for(int z=0; z <=maxval; z += 1){
      if(candles[z][1] != NULL){
        Serial.print("phi___");
        Serial.println(candles[z][0]);
        Serial.print("theta___");
        Serial.println(candles[z][1]);
        }else{Serial.println("none");}
      }
  }


  void setup() {
  servo1.attach(9);  // attaches the servo on pin 9 to the servo object
  servo2.attach(10);
  pinMode(input, INPUT_PULLUP);
  Serial.begin(9600);
  go();
Serial.println("donego");
detector();
Serial.println("donedet");
}
void loop(){
while(1==1){}
}
